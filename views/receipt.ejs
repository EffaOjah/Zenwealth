<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Zenwealth - Reciept</title>
    <link
      rel="shortcut icon"
      type="image/png"
      href="/img/Zenwealth Logo Alone-02.png"
    />
    <link rel="stylesheet" href="/css/newstyles.css" />
    <link rel="stylesheet" href="/bootstrap-5.3.3-dist/css/bootstrap.min.css" />
    <script
      src="https://kit.fontawesome.com/a207e207d8.js"
      crossorigin="anonymous"
    ></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.js"></script>
  </head>
  <body onload="autoClick()">
    <div class="page-wrapper">
      <div class="bottom-space" style="overflow-y: scroll">
        <!-- Navbar Start -->
        <nav class="navbar navbar-expand px-3 py-2 pt-3" id="navbar">
          <div class="d-flex gap-3 align">
            <a href="#" onclick="goBack()">
              <ion-icon
                name="arrow-back-outline"
                class="fs-2 text-white"
                style="transform: translateY(3px)"
              ></ion-icon>
            </a>
            <p class="fs-4 fw-">Receipt</p>
          </div>
          <div class="navbar-nav align-items-center ms-auto dashboard-nav">
            <img
              src="/img/Zenwealth Logo Alone-02.png"
              class="img-fluid"
              width="35px"
              style="transform: translateY(-10px)"
              alt="zenwealth logo"
            />
          </div>
        </nav>
        <!-- Navbar End -->

        <div
          class="container d-flex align-items-center justify-content-center"
          id="wrapper"
          style="flex-direction: column"
        >
          <div
            class="px-4 pb-2 pt-1 mt-1 radius-three fixed-width"
            id="receipt"
          >
            <div class="d-flex align-items-center justify-content-between mb-2">
              <p class="d-inline mb-0">WITHDRAWAL RECEIPT</p>
              <span
                ><img
                  src="img/ZEN logo.png"
                  class="img-fluid"
                  alt="zenwealth logo"
                  style="width: 110px"
              /></span>
            </div>
            <% if (locals.withdrawalDetails) { %>
            <p class="bg-two text-center py-2 -1 mb-1">
              <%= withdrawalDetails.date2 %>
            </p>
            <div class="receipt-info">
              <div class="d-flex align-items-center gap-1">
                <strong>Withdrawal Type:</strong> <span><%= withdrawalDetails.type %></span>
              </div>
              <div class="d-flex align-items-center gap-1">
                <strong>Date:</strong> <span><%= withdrawalDetails.date %></span>
              </div>
              <div class="d-flex align-items-center gap-1">
                <strong>Debit Account:</strong> <span>ZENWEALTH MGT.</span>
              </div>
              <div class="d-flex align-items-center gap-1">
                <strong>Credit Account:</strong> <span><%= withdrawalDetails.account %></span>
              </div>
              <div class="d-flex align-items-center gap-1">
                <strong>Beneficiary:</strong> <span><%= withdrawalDetails.beneficiary %></span>
              </div>
              <div class="d-flex align-items-center gap-1">
                <strong>Bank:</strong> <span><%= withdrawalDetails.bank %></span>
              </div>
              <div class="d-flex align-items-center gap-1">
                <strong>Narration:</strong> <span>Zenwealth Withdrawal</span>
              </div>
              <div class="d-flex align-items-center gap-1">
                <strong>Status:</strong> <span>Success</span>
              </div>
              <div class="d-flex align-items-center gap-1">
                <strong>Amount:</strong> <span><%= withdrawalDetails.amount %></span>
              </div>
              <br /><br />
              <p>
                <strong>Disclaimer: </strong>Your withdrawal has been
                successfully processed. Your account will be credited within
                five hours. Note, however, that completion of any with may be
                affected by other factors like network/internet interruption,
                glitch or other matters beyond our control.
              </p>
            </div>
            <% } else { %>
                <p class="bg-two text-center py-2 -1 mb-1">
              
                </p>
                <div class="receipt-info">
                  <div class="d-flex align-items-center gap-1">
                    <strong>Withdrawal Type:</strong> <span></span>
                  </div>
                  <div class="d-flex align-items-center gap-1">
                    <strong>Date:</strong> <span></span>
                  </div>
                  <div class="d-flex align-items-center gap-1">
                    <strong>Debit Account:</strong> <span></span>
                  </div>
                  <div class="d-flex align-items-center gap-1">
                    <strong>Credit Account:</strong> <span></span>
                  </div>
                  <div class="d-flex align-items-center gap-1">
                    <strong>Beneficiary:</strong> <span></span>
                  </div>
                  <div class="d-flex align-items-center gap-1">
                    <strong>Bank:</strong> <span></span>
                  </div>
                  <div class="d-flex align-items-center gap-1">
                    <strong>Narration:</strong> <span></span>
                  </div>
                  <div class="d-flex align-items-center gap-1">
                    <strong>Status:</strong> <span></span>
                  </div>
                  <div class="d-flex align-items-center gap-1">
                    <strong>Amount:</strong> <span></span>
                  </div>
                  <br /><br />
                  <p>
                    <strong>Disclaimer: </strong>Your withdrawal has been
                    successfully processed. Your account will be credited within
                    five hours. Note, however, that completion of any withdrawal may be
                    affected by other factors like network/internet interruption,
                    glitch or other matters beyond our control.
                  </p>
                </div>
           <% } %>
          </div>

          <br>
            <button id="download"
              class="btn btn-zen-sh text-white py-2 w-100"     >
            Download
            </button>
          </div>
        </div>
      </div>
    </div>

    <div
      class="offcanvas offcanvas-bottom px-3"
      style="height: fit-content"
      tabindex="-1"
      id="offcanvasBottom"
      aria-labelledby="offcanvasBottomLabel"
    >
      <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="offcanvasBottomLabel">Share</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="offcanvas"
          aria-label="Close"
        ></button>
      </div>
      <div class="offcanvas-body py-4">
        <div class="d-flex gap-4">
          <div class="d-grid" style="place-items: center">
            <ion-icon id="share-facebook" name="logo-facebook" style="font-size: 35px"></ion-icon>
            <p class="mt-2">Facebook</p>
          </div>
          <div class="d-grid" style="place-items: center">
            <ion-icon id="share-whatsapp" name="logo-whatsapp" style="font-size: 35px"></ion-icon>
            <p class="mt-2">Whatsapp</p>
          </div>
          <div class="d-grid" style="place-items: center">
            <ion-icon name="logo-tiktok" style="font-size: 35px"></ion-icon>
            <p class="mt-2">Tiktok</p>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script>
        // Generate the image from the receipt
        const generateImage = async () => {
            const element = document.getElementById("receipt");
            const canvas = await html2canvas(element);
            return canvas.toDataURL("image/png");
        };

        // Download the image
        document.getElementById("download").addEventListener("click", async () => {
            const imageData = await generateImage();

            let randomNo = Math.floor(Math.random() * 999999)

            let imgName = `ZEN_RECEIPT_${randomNo}.png`;

            // Create a temporary link to download the image
            const link = document.createElement("a");
            link.href = imageData;
            link.download = imgName;
            link.click();
        });

        // Share the image to Facebook
        document.getElementById("share-facebook").addEventListener("click", async () => {
            const imageData = await generateImage();
            const blob = await (await fetch(imageData)).blob();

            // Use Facebook sharing
            const dataTransfer = new DataTransfer();
            dataTransfer.items.add(new File([blob], "receipt.png", { type: "image/png" }));
            const facebookShareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(imageData)}`;
            window.open(facebookShareUrl, "_blank");
        });

        // Share the image to WhatsApp
        document.getElementById("share-whatsapp").addEventListener("click", async () => {
            const imageData = await generateImage();

            // For WhatsApp sharing
            const whatsappMessage = `Check out my receipt: ${imageData}`;
            const whatsappShareUrl = `https://api.whatsapp.com/send?text=${encodeURIComponent(whatsappMessage)}`;
            window.open(whatsappShareUrl, "_blank");
        });


    //   document.getElementById("download").addEventListener("click", () => {
    //     const element = document.getElementById("receipt");

    //     html2canvas(element).then((canvas) => {
    //       // Convert the canvas to a data URL
    //       const imageData = canvas.toDataURL("image/png");

    //       // Create a temporary link to download the image
    //       const link = document.createElement("a");
    //       link.href = imageData;
    //       link.download = "receipt.png"; // Set download filename
    //       link.click();
    //     });
    //   });
    </script>

    <script
      type="module"
      src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"
    ></script>
    <script
      nomodule
      src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"
    ></script>
    <script src="bootstrap-5.3.3-dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
